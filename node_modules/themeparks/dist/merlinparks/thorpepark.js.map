{"version":3,"sources":["../../lib/merlinparks/thorpepark.js"],"names":["MerlinPark","require","defaultFallbackData","ThorpePark","options","name","timezone","useragent","latitude","longitude","api_key","app_version","app_build","initial_data_version","fallback_data","HTTP","url","method","headers","then","calendarData","i","timeRange","applyDateRange","From","To","Open","module","exports"],"mappings":"AAAA;;;;;;;;;;AAEA,IAAIA,aAAaC,QAAQ,SAAR,CAAjB;IACMC,mB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEN;;;;;;IAKMC,U;;;AACF;;;AAGA,0BAA0B;AAAA,YAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACtBA,gBAAQC,IAAR,GAAeD,QAAQC,IAAR,IAAgB,aAA/B;AACAD,gBAAQE,QAAR,GAAmBF,QAAQE,QAAR,IAAoB,eAAvC;AACAF,gBAAQG,SAAR,GAAoB,cAApB;;AAEA;AACAH,gBAAQI,QAAR,GAAmBJ,QAAQI,QAAR,IAAoB,OAAvC;AACAJ,gBAAQK,SAAR,GAAoBL,QAAQK,SAAR,IAAqB,CAAC,MAA1C;;AAEA;AACAL,gBAAQM,OAAR,GAAkBN,QAAQM,OAAR,IAAmB,sCAArC;AACAN,gBAAQO,WAAR,GAAsBP,QAAQO,WAAR,IAAuB,QAA7C;AACAP,gBAAQQ,SAAR,GAAoBR,QAAQQ,SAAR,IAAqB,IAAzC;AACAR,gBAAQS,oBAAR,GAA+BT,QAAQS,oBAAR,IAAgC,sBAA/D;;AAEA;AACAT,gBAAQU,aAAR,GAAwBV,QAAQU,aAAR,IAAyBZ,mBAAjD;;AAEA;AAlBsB,uHAmBhBE,OAnBgB;AAoBzB;;;;4CAEmB;AAAA;;AAChB,mBAAO,KAAKW,IAAL,CAAU;AACbC,qBAAK,oEADQ;AAEbC,wBAAQ,KAFK;AAGbC,yBAAS;AACL,+BAAW,iEADN;AAEL,wCAAoB;AAFf;AAHI,aAAV,EAOJC,IAPI,CAOC,UAACC,YAAD,EAAkB;AACtB,qBAAK,IAAIC,IAAI,CAAR,EAAWC,SAAhB,EAA2BA,YAAYF,aAAaC,GAAb,CAAvC,GAA2D;AACvD;AACA,2BAAKE,cAAL,CAAoBD,UAAUE,IAA9B,EAAoCF,UAAUG,EAA9C,EAAkD,IAAlD,EAAwDH,UAAUI,IAAlE;AACH;AACJ,aAZM,CAAP;AAaH;;;;EAxCoB1B,U;;AA2CzB2B,OAAOC,OAAP,GAAiBzB,UAAjB","file":"thorpepark.js","sourcesContent":["\"use strict\";\n\nvar MerlinPark = require(\"./index\");\nconst defaultFallbackData = require(\"./thorpepark_data.json\");\n\n/**\n * Thorpe Park\n * @class\n * @extends MerlinPark\n */\nclass ThorpePark extends MerlinPark {\n    /**\n     * Create a new AltonTowers object\n     */\n    constructor(options = {}) {\n        options.name = options.name || \"Thorpe Park\";\n        options.timezone = options.timezone || \"Europe/London\";\n        options.useragent = \"okhttp/3.9.1\";\n\n        // set park's location as it's entrance\n        options.latitude = options.latitude || 51.4055;\n        options.longitude = options.longitude || -0.5105;\n\n        // Park API options\n        options.api_key = options.api_key || \"a070eedc-db3a-4c69-b55a-b79336ce723f\";\n        options.app_version = options.app_version || \"1.1.72\";\n        options.app_build = options.app_build || \"79\";\n        options.initial_data_version = options.initial_data_version || \"2019-04-17T12:50:44Z\";\n\n        // Fallback data if the /data webservice doesn't work\n        options.fallback_data = options.fallback_data || defaultFallbackData;\n\n        // inherit from base class\n        super(options);\n    }\n\n    FetchOpeningTimes() {\n        return this.HTTP({\n            url: \"https://www.thorpepark.com/Umbraco/Api/Calendar/GetAllOpeningTimes\",\n            method: \"GET\",\n            headers: {\n                \"Referer\": \"https://www.thorpepark.com/resort-info/opening-times-and-travel\",\n                \"X-Requested-With\": \"XMLHttpRequest\",\n            }\n        }).then((calendarData) => {\n            for (let i = 0, timeRange; timeRange = calendarData[i++];) {\n                // The API response only contains dates where the park is open\n                this.applyDateRange(timeRange.From, timeRange.To, true, timeRange.Open);\n            }\n        });\n    }\n}\n\nmodule.exports = ThorpePark;"]}